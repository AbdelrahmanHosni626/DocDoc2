  name: Android Fastlane Firebase App Distribution Workflow
  on:
    push:
      branches:
        - master
  jobs:
    distribute_to_firebase:
      name: Build DocDoc App
      runs-on: ubuntu-latest
      steps:
        - name: Check My repo Code
          uses: actions/checkout@v4


        - name: Set up Java JDK 21
          uses: actions/setup-java@v4
          with:
            java-version: 21
            distribution: 'temurin'


        - name: Install Flutter
          uses: subosito/flutter-action@v2.16.0
          with:
            channel: 'stable'


        - name: Install Ruby
          uses: ruby/setup-ruby@v1
          with:
            ruby-version: 3.2.4
            bundler-cache: true
            working-directory: android

        - name: Build and Distribute App
          env:
            FIREBASE_CLI_TOKEN: ${{ secrets.FIREBASE_CLI_TOKEN }}
          run: bundle exec fastlane firebase_android_distribution
          working-directory: android